var te=Object.defineProperty;var ne=(a,s,t)=>s in a?te(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var b=(a,s,t)=>ne(a,typeof s!="symbol"?s+"":s,t);import{r as u,a as ae,R as ie}from"./vendor-cxkclgJA.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();var z={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re=u,oe=Symbol.for("react.element"),ce=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,de=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ue={key:!0,ref:!0,__self:!0,__source:!0};function J(a,s,t){var n,o={},r=null,c=null;t!==void 0&&(r=""+t),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(c=s.ref);for(n in s)le.call(s,n)&&!ue.hasOwnProperty(n)&&(o[n]=s[n]);if(a&&a.defaultProps)for(n in s=a.defaultProps,s)o[n]===void 0&&(o[n]=s[n]);return{$$typeof:oe,type:a,key:r,ref:c,props:o,_owner:de.current}}T.Fragment=ce;T.jsx=J;T.jsxs=J;z.exports=T;var e=z.exports,Q={},G=ae;Q.createRoot=G.createRoot,Q.hydrateRoot=G.hydrateRoot;const P=a=>a.type==="mcq",_=a=>a.type==="typing",O=a=>a.type==="open",W=a=>(a||"").toLowerCase().trim().replace(/[\u3000\s]+/g," ").replace(/[''`]/g,"'").normalize("NFC"),he=a=>{const s=a.slice();for(let t=s.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),o=s[t];s[t]=s[n],s[n]=o}return s},me=()=>new Date().toISOString(),ge=(a,s)=>s===0?0:Math.round(a/s*100),F={QUIZ_MIN_QUESTIONS:6,QUIZ_MAX_QUESTIONS:14,EXAM_QUESTIONS:20};var B=(a=>(a.IDLE="idle",a.ACTIVE="active",a.COMPLETED="completed",a.PAUSED="paused",a))(B||{});class K{constructor(s){b(this,"currentSession",null);b(this,"questionBank");this.questionBank=s}startSession(s){try{const t=this.getQuestionsForSession(s);return t.length===0?(console.warn(`ไม่พบคำถามสำหรับ ${s.track}/${s.framework}/${s.level}`),!1):(this.currentSession={config:s,questions:s.shuffleQuestions!==!1?he(t):t,currentIndex:0,answers:new Array(t.length).fill(null),correctAnswers:new Array(t.length).fill(!1),startTime:Date.now(),state:"active"},console.log(`🎯 เริ่มเซสชัน ${s.mode}: ${t.length} ข้อ`),!0)}catch(t){return console.error("เกิดข้อผิดพลาดในการเริ่มเซสชัน:",t),!1}}getCurrentQuestion(){if(!this.currentSession||this.currentSession.state!=="active")return null;const{questions:s,currentIndex:t}=this.currentSession;return s[t]||null}getSessionProgress(){if(!this.currentSession)return{current:0,total:0,correct:0};const{currentIndex:s,questions:t,correctAnswers:n}=this.currentSession,o=n.filter(Boolean).length;return{current:Math.min(s+1,t.length),total:t.length,correct:o}}answerMCQ(s){const t=this.getCurrentQuestion();if(!t||!P(t)||!this.currentSession)return{isCorrect:!1,explanation:"ไม่พบคำถาม MCQ"};const n=t,o=s===n.answerIndex;this.currentSession.answers[this.currentSession.currentIndex]=s,this.currentSession.correctAnswers[this.currentSession.currentIndex]=o;const r={isCorrect:o},c=n.choices[n.answerIndex];return c&&(r.correctAnswer=c),n.explanation&&(r.explanation=n.explanation),r}answerTyping(s){const t=this.getCurrentQuestion();if(!t||!_(t)||!this.currentSession)return{isCorrect:!1,explanation:"ไม่พบคำถาม Typing"};const n=t,o=W(s),c=n.accept.map(W).includes(o);this.currentSession.answers[this.currentSession.currentIndex]=s,this.currentSession.correctAnswers[this.currentSession.currentIndex]=c;const i={isCorrect:c};return n.accept.length>0&&(i.correctAnswer=n.accept),n.explanation&&(i.explanation=n.explanation),i}answerOpen(s){const t=this.getCurrentQuestion();if(!t||!O(t)||!this.currentSession)return{isCorrect:!1,explanation:"ไม่พบคำถาม Open"};const n=t;this.currentSession.answers[this.currentSession.currentIndex]=s,this.currentSession.correctAnswers[this.currentSession.currentIndex]=!0;const o={isCorrect:!0};return n.explanation&&(o.explanation=n.explanation),o}nextQuestion(){if(!this.currentSession||this.currentSession.state!=="active")return!1;const{questions:s,currentIndex:t}=this.currentSession;return t<s.length-1?(this.currentSession.currentIndex++,!0):(this.currentSession.state="completed",this.currentSession.endTime=Date.now(),!1)}previousQuestion(){return!this.currentSession||this.currentSession.state!=="active"?!1:this.currentSession.currentIndex>0?(this.currentSession.currentIndex--,!0):!1}skipQuestion(){return this.currentSession?(this.currentSession.answers[this.currentSession.currentIndex]=null,this.currentSession.correctAnswers[this.currentSession.currentIndex]=!1,this.nextQuestion()):!1}finishSession(){if(!this.currentSession)return null;const{config:s,correctAnswers:t}=this.currentSession,n=t.length,o=t.filter(Boolean).length,r=ge(o,n);this.currentSession.state="completed",this.currentSession.endTime=Date.now();const c={date:me(),track:s.track,framework:s.framework,level:s.level,mode:s.mode,scorePct:r,total:n,correct:o};return console.log(`✅ เซสชันเสร็จสิ้น: ${o}/${n} (${r}%)`),this.currentSession=null,c}forceFinishSession(){return this.currentSession?(this.currentSession.state="completed",this.finishSession()):null}resetSession(){this.currentSession&&(console.log("🔄 รีเซ็ตเซสชัน"),this.currentSession=null)}pauseSession(){return this.currentSession&&this.currentSession.state==="active"?(this.currentSession.state="paused",console.log("⏸️ หยุดเซสชันชั่วคราว"),!0):!1}resumeSession(){return this.currentSession&&this.currentSession.state==="paused"?(this.currentSession.state="active",console.log("▶️ เริ่มเซสชันต่อ"),!0):!1}getSessionState(){return this.currentSession?.state||"idle"}getQuestionsForSession(s){const{track:t,framework:n,level:o,mode:r,questionCount:c}=s,i=this.questionBank[t];if(!i)return[];const d=i[n];if(!d)return[];const h=d[o];if(!h||h.length===0)return[];let v=[...h];switch(r){case"Quiz":const f=F.QUIZ_MIN_QUESTIONS,l=F.QUIZ_MAX_QUESTIONS,m=c||Math.min(l,v.length);v=v.slice(0,Math.max(f,m));break;case"Exam":const x=c||F.EXAM_QUESTIONS;v=v.slice(0,x);break}return v}}const Y={EN:{Classic:{Beginner:[{id:"en-mcq-1",type:"mcq",prompt:"What is the capital of Thailand?",choices:["Bangkok","Chiang Mai","Phuket","Pattaya"],answerIndex:0,explanation:"Bangkok is the capital and largest city of Thailand."},{id:"en-typing-1",type:"typing",prompt:'Type the word "hello" in English',accept:["hello","Hello","HELLO"],placeholder:"Type your answer here...",explanation:"Hello is a common greeting in English."},{id:"en-open-1",type:"open",prompt:"Describe your favorite hobby in 2-3 sentences.",explanation:"This is an open-ended question to practice writing skills.",rubric:["Grammar","Vocabulary","Coherence"]},{id:"en-mcq-2",type:"mcq",prompt:"Which of these is a fruit?",choices:["Carrot","Apple","Potato","Onion"],answerIndex:1,explanation:"An apple is a fruit, while the others are vegetables."},{id:"en-typing-2",type:"typing",prompt:'Complete: "I ___ to school every day" (go/goes)',accept:["go","Go"],explanation:'Use "go" with "I" (first person singular).'}]},CEFR:{A1:[{id:"cefr-a1-1",type:"mcq",prompt:'How do you say "good morning"?',choices:["Good night","Good morning","Good evening","Good afternoon"],answerIndex:1,explanation:"Good morning is used to greet someone in the morning."}]},JLPT:{N5:[]}},JP:{Classic:{Beginner:[{id:"jp-mcq-1",type:"mcq",prompt:"こんにちは means:",choices:["Good morning","Hello/Good afternoon","Good evening","Good night"],answerIndex:1,explanation:"こんにちは (konnichiwa) is used as a greeting during the day."}]},CEFR:{A1:[]},JLPT:{N5:[{id:"jlpt-n5-1",type:"typing",prompt:'Type "arigatou" in hiragana',accept:["ありがとう","あリがとう"],explanation:'ありがとう means "thank you" in Japanese.'}]}}};function xe(a){const s=a.getCurrentQuestion(),t=a.getSessionProgress();if(console.log(`
`+"=".repeat(50)),console.log(`📚 Question ${t.current}/${t.total} | Score: ${t.correct}/${t.current-1}`),console.log("=".repeat(50)),!s){console.log("❌ No question available");return}if(console.log(`🎯 ${s.prompt}`),s.type==="mcq")s.choices.forEach((o,r)=>{console.log(`   ${r+1}. ${o}`)});else if(s.type==="typing"){const n=s;n.placeholder&&console.log(`💡 Hint: ${n.placeholder}`)}else if(s.type==="open"){const n=s;n.rubric&&console.log(`📋 Evaluation criteria: ${n.rubric.join(", ")}`)}}function pe(a){console.log(`
`+"-".repeat(30)),a.isCorrect?console.log("✅ Correct!"):console.log("❌ Incorrect"),a.explanation&&console.log(`💡 ${a.explanation}`),a.correctAnswer&&(Array.isArray(a.correctAnswer)?console.log(`🎯 Acceptable answers: ${a.correctAnswer.join(", ")}`):console.log(`🎯 Correct answer: ${a.correctAnswer}`)),console.log("-".repeat(30))}async function fe(){console.log("🎌 Welcome to Saku Dojo v2 Demo! 🎌"),console.log(`Language Learning Engine Demonstration
`);const a=new K(Y);if(console.log("📖 Demo 1: English Classic Beginner Quiz"),console.log(`Starting a 3-question quiz session...
`),!a.startSession({track:"EN",framework:"Classic",level:"Beginner",mode:"Quiz",questionCount:3,shuffleQuestions:!1})){console.log("❌ Failed to start session");return}let t=0;for(;a.getSessionState()===B.ACTIVE&&t<5;){t++,xe(a);const o=a.getCurrentQuestion();if(!o)break;let r;if(o.type==="mcq"){const i=t===1?0:t===4?1:2;r=a.answerMCQ(i),console.log(`
👤 User selected: ${i+1}`)}else if(o.type==="typing"){const d=["hello","go"][t===2?0:1]||"test";r=a.answerTyping(d),console.log(`
👤 User typed: "${d}"`)}else if(o.type==="open"){const i="I love reading books because it helps me learn new things and relax.";r=a.answerOpen(i),console.log(`
👤 User wrote: "${i}"`)}if(r&&pe(r),!a.nextQuestion()){console.log(`
🏁 Session completed!`);break}await new Promise(i=>setTimeout(i,1e3))}const n=a.finishSession();n&&(console.log(`
`+"🎉".repeat(20)),console.log("📊 FINAL RESULTS"),console.log("🎉".repeat(20)),console.log(`📅 Date: ${n.date}`),console.log(`🌍 Language: ${n.track}`),console.log(`📚 Framework: ${n.framework}`),console.log(`📈 Level: ${n.level}`),console.log(`🎮 Mode: ${n.mode}`),console.log(`✅ Score: ${n.correct}/${n.total} (${n.scorePct}%)`),n.scorePct>=80?console.log("🌟 Excellent! You're ready for the next level!"):n.scorePct>=60?console.log("👍 Good job! Keep practicing!"):console.log("💪 Keep studying! You'll improve with practice!")),console.log(`
`+"=".repeat(50)),console.log("🎌 Demo completed! Thank you for trying Saku Dojo v2! 🎌"),console.log("=".repeat(50))}fe().catch(console.error);const H=u.createContext(void 0),$=()=>{const a=u.useContext(H);if(a===void 0)throw new Error("useTheme must be used within a ThemeProvider");return a},ve=({children:a})=>{const[s,t]=u.useState("default"),[n,o]=u.useState("en");u.useEffect(()=>{const i=localStorage.getItem("sakulang-theme"),d=localStorage.getItem("sakulang-language");i&&t(i),d&&o(d)},[]),u.useEffect(()=>{document.documentElement.setAttribute("data-theme",s)},[s]);const r=i=>{t(i),localStorage.setItem("sakulang-theme",i)},c=i=>{o(i),localStorage.setItem("sakulang-language",i)};return e.jsx(H.Provider,{value:{theme:s,language:n,setTheme:r,setLanguage:c},children:a})};class Ne{constructor(){b(this,"sessionId");b(this,"userId");b(this,"events",[]);b(this,"isEnabled",!1);this.sessionId=this.generateSessionId(),this.loadSettings()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}loadSettings(){const s=localStorage.getItem("sakulang-analytics-consent");this.isEnabled=s==="true";const t=localStorage.getItem("sakulang-user-id");t?this.userId=t:(this.userId=this.generateUserId(),localStorage.setItem("sakulang-user-id",this.userId))}generateUserId(){return`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setEnabled(s){this.isEnabled=s,localStorage.setItem("sakulang-analytics-consent",s.toString()),s||this.clearData()}isAnalyticsEnabled(){return this.isEnabled}track(s,t){if(!this.isEnabled)return;const n={event:s,properties:{...t,userAgent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screenResolution:`${screen.width}x${screen.height}`,url:window.location.href},timestamp:Date.now(),sessionId:this.sessionId};this.userId&&(n.userId=this.userId),this.events.push(n),this.saveToStorage(),this.sendToEndpoint(n)}trackPageView(s){this.track("page_view",{page:s})}trackSessionStart(s){this.track("session_start",{track:s.track,framework:s.framework,level:s.level,mode:s.mode,questionCount:s.questionCount})}trackQuestionAnswered(s,t,n){this.track("question_answered",{questionId:s,isCorrect:t,timeSpent:n})}trackSessionComplete(s){this.track("session_complete",{score:s.scorePct,correct:s.correct,total:s.total,track:s.track,framework:s.framework,level:s.level,mode:s.mode})}trackThemeChange(s){this.track("theme_change",{theme:s})}trackLanguageChange(s){this.track("language_change",{language:s})}trackFeatureUsed(s,t){this.track("feature_used",{feature:s,...t})}async getUserLocation(){if(!this.isEnabled)return{};try{const t=await(await fetch("https://ipapi.co/json/")).json();return{country:t.country_name,city:t.city}}catch(s){return console.warn("Could not get user location:",s),{}}}async getPublicStats(){const s=this.getAllEvents(),t=s.filter(i=>i.event==="session_start"&&new Date(i.timestamp).toDateString()===new Date().toDateString()).length,n=s.filter(i=>i.event==="question_answered"),o=n.filter(i=>i.properties?.isCorrect).length,r={},c={};return s.filter(i=>i.event==="session_start").forEach(i=>{const d=i.properties?.track,h=i.properties?.framework;d&&(r[d]=(r[d]||0)+1),h&&(c[h]=(c[h]||0)+1)}),{totalUsers:new Set(s.map(i=>i.userId)).size,activeUsers:new Set(s.filter(i=>Date.now()-i.timestamp<24*60*60*1e3).map(i=>i.userId)).size,sessionsToday:t,questionsAnswered:n.length,averageAccuracy:n.length>0?o/n.length*100:0,popularLanguages:r,popularFrameworks:c,userLocations:{}}}exportUserData(){return this.events.filter(s=>s.userId===this.userId)}deleteUserData(){this.events=this.events.filter(s=>s.userId!==this.userId),this.clearData(),this.userId=this.generateUserId(),localStorage.setItem("sakulang-user-id",this.userId)}clearData(){this.events=[],localStorage.removeItem("sakulang-analytics-events")}saveToStorage(){this.events.length>1e3&&(this.events=this.events.slice(-1e3)),localStorage.setItem("sakulang-analytics-events",JSON.stringify(this.events))}getAllEvents(){try{const s=localStorage.getItem("sakulang-analytics-events");return s?JSON.parse(s):[]}catch{return[]}}async sendToEndpoint(s){}}const A=new Ne,V=()=>{const[a,s]=u.useState(null),[t,n]=u.useState(!0);return u.useEffect(()=>{const o=async()=>{try{const c=await A.getPublicStats();s(c)}catch(c){console.error("Failed to load analytics:",c)}finally{n(!1)}};o();const r=setInterval(o,5*60*1e3);return()=>clearInterval(r)},[]),{stats:a,loading:t,track:A.track.bind(A),isEnabled:A.isAnalyticsEnabled(),setEnabled:A.setEnabled.bind(A)}};class je{constructor(){b(this,"state",{user:null,isAuthenticated:!1,isLoading:!0});b(this,"listeners",[]);this.loadUser()}subscribe(s){return this.listeners.push(s),()=>{this.listeners=this.listeners.filter(t=>t!==s)}}notify(){this.listeners.forEach(s=>s(this.state))}async loadUser(){try{const s=localStorage.getItem("sakulang-user");if(s){const t=JSON.parse(s);this.state={user:t,isAuthenticated:!0,isLoading:!1}}else this.state.isLoading=!1}catch(s){console.error("Failed to load user:",s),this.state.isLoading=!1}this.notify()}async loginAsGuest(s){const t={id:`guest_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,username:s||`Guest_${Math.random().toString(36).substr(2,6)}`,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),preferences:{theme:"default",language:"en",notifications:!0,analytics:!1},stats:{totalSessions:0,totalQuestions:0,averageScore:0,streakDays:0}};return this.state={user:t,isAuthenticated:!0,isLoading:!1},localStorage.setItem("sakulang-user",JSON.stringify(t)),this.notify(),t}async register(s,t,n){throw new Error("Email registration not implemented yet")}async login(s,t){throw new Error("Email login not implemented yet")}async loginWithGoogle(){throw new Error("Google login not implemented yet")}async loginWithApple(){throw new Error("Apple login not implemented yet")}async logout(){this.state={user:null,isAuthenticated:!1,isLoading:!1},localStorage.removeItem("sakulang-user"),this.notify()}async updateUser(s){if(!this.state.user)throw new Error("No user logged in");const t={...this.state.user,...s,lastLogin:new Date().toISOString()};return this.state.user=t,localStorage.setItem("sakulang-user",JSON.stringify(t)),this.notify(),t}async updatePreferences(s){this.state.user&&await this.updateUser({preferences:{...this.state.user.preferences,...s}})}async updateStats(s){this.state.user&&await this.updateUser({stats:{...this.state.user.stats,...s}})}getState(){return this.state}async exportUserData(){return{user:this.state.user,analytics:localStorage.getItem("sakulang-analytics-events"),progress:localStorage.getItem("saku-dojo-progress")}}async deleteAccount(){localStorage.removeItem("sakulang-user"),localStorage.removeItem("sakulang-analytics-events"),localStorage.removeItem("sakulang-analytics-consent"),localStorage.removeItem("saku-dojo-progress"),localStorage.removeItem("sakulang-theme"),localStorage.removeItem("sakulang-language"),this.state={user:null,isAuthenticated:!1,isLoading:!1},this.notify()}}const y=new je,Z=()=>{const[a,s]=u.useState(y.getState());return u.useEffect(()=>y.subscribe(s),[]),{...a,loginAsGuest:y.loginAsGuest.bind(y),logout:y.logout.bind(y),updateUser:y.updateUser.bind(y),updatePreferences:y.updatePreferences.bind(y),updateStats:y.updateStats.bind(y),exportUserData:y.exportUserData.bind(y),deleteAccount:y.deleteAccount.bind(y)}},R={en:{appName:"SAKULANG",tagline:"Free Language Learning Platform",startLearning:"Start Learning",viewProgress:"View Progress",settings:"Settings",back:"Back",next:"Next",previous:"Previous",skip:"Skip",finish:"Finish",submit:"Submit Answer",question:"Question",score:"Score",correct:"Correct",incorrect:"Incorrect",explanation:"Explanation",correctAnswer:"Correct Answer",language:"Language",framework:"Framework",level:"Level",mode:"Mode",languages:{EN:"🇺🇸 English",JP:"🇯🇵 Japanese"},frameworks:{Classic:"🎓 Classic",CEFR:"🇪🇺 CEFR",JLPT:"🎌 JLPT"},modes:{Quiz:"⚡ Quick Quiz",Study:"📖 Study Mode",Exam:"📝 Exam Mode",Read:"👁️ Reading",Write:"✍️ Writing"},totalSessions:"Total Sessions",averageScore:"Average Score",bestScore:"Best Score",totalCorrect:"Total Correct",themes:{default:"💙 Minimal Blue",cute:"💖 Cute Pink",cool:"🌊 Cool Cyan",dark:"🌙 Dark Mode"},appearance:"Appearance",notifications:"Notifications",privacy:"Privacy & Security",about:"About SAKULANG",dailyReminder:"Daily Learning Reminder",studyTime:"Study Time",achievements:"Achievement Notifications",firstSteps:"First Steps",gettingStarted:"Getting Started",dedicated:"Dedicated Learner",highScorer:"High Scorer",perfect:"Perfect Score!",scholar:"Scholar",welcomeMessage:"Welcome to SAKULANG! Start your language learning journey today.",noProgressYet:"No progress yet. Start your first learning session!",sessionComplete:"Session Complete!",excellentWork:"Excellent work! You're ready for the next challenge!",keepPracticing:"Keep practicing! You'll improve with time.",analytics:"Learning Analytics",totalUsers:"Total Users",sessionsToday:"Sessions Today",questionsAnswered:"Questions Answered",averageAccuracy:"Average Accuracy"},th:{appName:"SAKULANG",tagline:"แพลตฟอร์มเรียนภาษาฟรี",startLearning:"เริ่มเรียน",viewProgress:"ดูความก้าวหน้า",settings:"ตั้งค่า",back:"กลับ",next:"ถัดไป",previous:"ก่อนหน้า",skip:"ข้าม",finish:"เสร็จสิ้น",submit:"ส่งคำตอบ",question:"คำถาม",score:"คะแนน",correct:"ถูกต้อง",incorrect:"ไม่ถูกต้อง",explanation:"คำอธิบาย",correctAnswer:"คำตอบที่ถูก",language:"ภาษา",framework:"หลักสูตร",level:"ระดับ",mode:"โหมด",languages:{EN:"🇺🇸 ภาษาอังกฤษ",JP:"🇯🇵 ภาษาญี่ปุ่น"},frameworks:{Classic:"🎓 ทั่วไป",CEFR:"🇪🇺 มาตรฐานยุโรป",JLPT:"🎌 มาตรฐานญี่ปุ่น"},modes:{Quiz:"⚡ แบบทดสอบสั้น",Study:"📖 โหมดศึกษา",Exam:"📝 โหมดสอบ",Read:"👁️ การอ่าน",Write:"✍️ การเขียน"},totalSessions:"จำนวนครั้งทั้งหมด",averageScore:"คะแนนเฉลี่ย",bestScore:"คะแนนสูงสุด",totalCorrect:"จำนวนข้อที่ถูก",themes:{default:"💙 สีฟ้ามินิมอล",cute:"💖 สีชมพูน่ารัก",cool:"🌊 สีฟ้าเท่",dark:"🌙 โหมดมืด"},appearance:"รูปลักษณ์",notifications:"การแจ้งเตือน",privacy:"ความเป็นส่วนตัวและความปลอดภัย",about:"เกี่ยวกับ SAKULANG",dailyReminder:"การแจ้งเตือนเรียนประจำวัน",studyTime:"เวลาเรียน",achievements:"การแจ้งเตือนความสำเร็จ",firstSteps:"ก้าวแรก",gettingStarted:"เริ่มต้นแล้ว",dedicated:"ผู้เรียนที่มุ่งมั่น",highScorer:"คะแนนสูง",perfect:"คะแนนเต็ม!",scholar:"นักวิชาการ",welcomeMessage:"ยินดีต้อนรับสู่ SAKULANG! เริ่มต้นการเรียนภาษาของคุณวันนี้",noProgressYet:"ยังไม่มีความก้าวหน้า เริ่มเรียนครั้งแรกของคุณเลย!",sessionComplete:"เรียนเสร็จแล้ว!",excellentWork:"ยอดเยี่ยม! คุณพร้อมสำหรับความท้าทายใหม่แล้ว!",keepPracticing:"ฝึกฝนต่อไป! คุณจะพัฒนาขึ้นเรื่อยๆ",analytics:"สถิติการเรียน",totalUsers:"ผู้ใช้ทั้งหมด",sessionsToday:"เซสชันวันนี้",questionsAnswered:"คำถามที่ตอบแล้ว",averageAccuracy:"ความแม่นยำเฉลี่ย"},ja:{appName:"SAKULANG",tagline:"無料言語学習プラットフォーム",startLearning:"学習開始",viewProgress:"進捗確認",settings:"設定",back:"戻る",next:"次へ",previous:"前へ",skip:"スキップ",finish:"完了",submit:"回答送信",question:"問題",score:"スコア",correct:"正解",incorrect:"不正解",explanation:"解説",correctAnswer:"正解",language:"言語",framework:"フレームワーク",level:"レベル",mode:"モード",languages:{EN:"🇺🇸 英語",JP:"🇯🇵 日本語"},frameworks:{Classic:"🎓 クラシック",CEFR:"🇪🇺 CEFR",JLPT:"🎌 JLPT"},modes:{Quiz:"⚡ クイズ",Study:"📖 学習モード",Exam:"📝 試験モード",Read:"👁️ 読解",Write:"✍️ 作文"},totalSessions:"総セッション数",averageScore:"平均スコア",bestScore:"最高スコア",totalCorrect:"正解総数",themes:{default:"💙 ミニマルブルー",cute:"💖 キュートピンク",cool:"🌊 クールシアン",dark:"🌙 ダークモード"},appearance:"外観",notifications:"通知",privacy:"プライバシーとセキュリティ",about:"SAKULANGについて",dailyReminder:"毎日の学習リマインダー",studyTime:"学習時間",achievements:"達成通知",firstSteps:"ファーストステップ",gettingStarted:"スタート",dedicated:"熱心な学習者",highScorer:"ハイスコアラー",perfect:"パーフェクト！",scholar:"学者",welcomeMessage:"SAKULANGへようこそ！今日から言語学習の旅を始めましょう。",noProgressYet:"まだ進捗がありません。最初の学習セッションを始めましょう！",sessionComplete:"セッション完了！",excellentWork:"素晴らしい！次のチャレンジの準備ができました！",keepPracticing:"練習を続けてください！時間とともに上達します。",analytics:"学習分析",totalUsers:"総ユーザー数",sessionsToday:"今日のセッション",questionsAnswered:"回答済み問題数",averageAccuracy:"平均正答率"}},D=()=>{const{language:a}=$();return{t:n=>{const o=R[a][n]||R.en[n];return typeof o=="string"?o:n},tNested:n=>{const o=n.split(".");let r=R[a];for(const c of o)r=r?.[c];return typeof r=="string"?r:n},language:a}},ye=({onStartSession:a,onShowProgress:s,progressCount:t})=>{const[n,o]=u.useState("EN"),[r,c]=u.useState("Classic"),[i,d]=u.useState("Beginner"),[h,v]=u.useState("Quiz"),[f,l]=u.useState(5),m=()=>{const p={track:n,framework:r,level:i,mode:h};h==="Quiz"&&(p.questionCount=f),a(p)},x=()=>r==="CEFR"?["A1","A2","B1","B2","C1","C2"]:r==="JLPT"?["N5","N4","N3","N2","N1"]:["Beginner","Intermediate","Advanced"];return e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"card",style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"🎯 Start Learning Session"}),e.jsx("p",{className:"text-gray-600 text-center",children:"Choose your language, framework, and difficulty level"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"🌍 Language / ภาษา"}),e.jsxs("select",{className:"form-select",value:n,onChange:p=>o(p.target.value),children:[e.jsx("option",{value:"EN",children:"🇺🇸 English (อังกฤษ)"}),e.jsx("option",{value:"JP",children:"🇯🇵 Japanese (ญี่ปุ่น)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"📚 Framework / หลักสูตร"}),e.jsxs("select",{className:"form-select",value:r,onChange:p=>{const N=p.target.value;c(N),d(N==="CEFR"?"A1":N==="JLPT"?"N5":"Beginner")},children:[e.jsx("option",{value:"Classic",children:"🎓 Classic (ทั่วไป)"}),e.jsx("option",{value:"CEFR",children:"🇪🇺 CEFR (มาตรฐานยุโรป)"}),e.jsx("option",{value:"JLPT",children:"🎌 JLPT (มาตรฐานญี่ปุ่น)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"📈 Level / ระดับ"}),e.jsx("select",{className:"form-select",value:i,onChange:p=>d(p.target.value),children:x().map(p=>e.jsx("option",{value:p,children:p},p))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"🎮 Mode / โหมด"}),e.jsxs("select",{className:"form-select",value:h,onChange:p=>v(p.target.value),children:[e.jsx("option",{value:"Quiz",children:"⚡ Quiz (แบบทดสอบสั้น)"}),e.jsx("option",{value:"Study",children:"📖 Study (ศึกษา)"}),e.jsx("option",{value:"Exam",children:"📝 Exam (สอบ)"}),e.jsx("option",{value:"Read",children:"👁️ Read (อ่าน)"}),e.jsx("option",{value:"Write",children:"✍️ Write (เขียน)"})]})]}),h==="Quiz"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"🔢 Number of Questions / จำนวนข้อ"}),e.jsxs("select",{className:"form-select",value:f,onChange:p=>l(Number(p.target.value)),children:[e.jsx("option",{value:3,children:"3 questions"}),e.jsx("option",{value:5,children:"5 questions"}),e.jsx("option",{value:10,children:"10 questions"}),e.jsx("option",{value:15,children:"15 questions"}),e.jsx("option",{value:20,children:"20 questions"})]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("button",{className:"btn btn-primary btn-lg",onClick:m,children:"🚀 Start Learning"}),t>0&&e.jsxs("button",{className:"btn btn-secondary",onClick:s,children:["📊 View Progress (",t," sessions)"]})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-center",children:"ℹ️ How to Use / วิธีใช้งาน"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"📱 Mobile Friendly:"})," Works perfectly on phones and tablets"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"💾 Auto Save:"})," Your progress is automatically saved"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🔄 Offline Ready:"})," Works without internet after first load"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🎯 Question Types:"})," Multiple choice, typing, and open-ended"]})]})]})})})]})},be=({engine:a,onFinish:s,onExit:t})=>{const[n,o]=u.useState(null),[r,c]=u.useState({current:0,total:0,correct:0}),[i,d]=u.useState(""),[h,v]=u.useState(!1),[f,l]=u.useState(null),[m,x]=u.useState(!1);u.useEffect(()=>{p()},[]);const p=()=>{const j=a.getCurrentQuestion(),C=a.getSessionProgress();o(j),c(C),d(""),v(!1),l(null),x(!1)},N=()=>{if(!n||m)return;let j;if(P(n))j=a.answerMCQ(Number(i));else if(_(n))j=a.answerTyping(String(i));else if(O(n))j=a.answerOpen(String(i));else return;l(j),v(!0),x(!0)},S=()=>{a.nextQuestion()?p():s()},U=()=>{a.skipQuestion(),a.nextQuestion()?p():s()},L=()=>m||!n?!1:P(n)?i!=="":String(i).trim().length>0,I=r.total>0?r.current/r.total*100:0;return n?e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Question ",r.current," of ",r.total]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Score: ",r.correct,"/",r.current-1]})]}),e.jsx("div",{className:"progress",children:e.jsx("div",{className:"progress-bar",style:{width:`${I}%`}})})]}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[n.type==="mcq"&&"🎯 Multiple Choice",n.type==="typing"&&"⌨️ Type Your Answer",n.type==="open"&&"✍️ Open Question"]}),e.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:["ID: ",n.id]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-lg mb-4",children:n.prompt}),P(n)&&e.jsx("div",{className:"space-y-3",children:n.choices.map((j,C)=>e.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer transition-colors ${i===C?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${m?"cursor-not-allowed opacity-75":""}`,children:[e.jsx("input",{type:"radio",name:"mcq-answer",value:C,checked:i===C,onChange:q=>!m&&d(Number(q.target.value)),disabled:m,className:"mr-3"}),e.jsxs("span",{className:"font-medium mr-2",children:[String.fromCharCode(65+C),"."]}),e.jsx("span",{children:j})]},C))}),_(n)&&e.jsx("div",{children:e.jsx("input",{type:"text",className:"form-input",placeholder:n.placeholder||"Type your answer...",value:i,onChange:j=>!m&&d(j.target.value),disabled:m,autoFocus:!0})}),O(n)&&e.jsxs("div",{children:[e.jsx("textarea",{className:"form-textarea",placeholder:"Write your answer here...",value:i,onChange:j=>!m&&d(j.target.value),disabled:m,rows:4,autoFocus:!0}),n.rubric&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Evaluation criteria:"})," ",n.rubric.join(", ")]})})]})]}),h&&f&&e.jsx("div",{className:`alert ${f.isCorrect?"alert-success":"alert-error"} mb-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:f.isCorrect?"✅":"❌"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold mb-2",children:f.isCorrect?"Correct!":"Incorrect"}),f.explanation&&e.jsx("p",{className:"mb-2",children:f.explanation}),f.correctAnswer&&!f.isCorrect&&e.jsxs("p",{children:[e.jsx("strong",{children:"Correct answer:"})," "," ",Array.isArray(f.correctAnswer)?f.correctAnswer.join(", "):f.correctAnswer]})]})]})})]}),e.jsx("div",{className:"card-footer",children:e.jsx("div",{className:"flex gap-3",children:m?e.jsx("button",{className:"btn btn-primary flex-1",onClick:S,children:r.current<r.total?"Next Question":"Finish"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary flex-1",onClick:N,disabled:!L(),children:"Submit Answer"}),e.jsx("button",{className:"btn btn-secondary",onClick:U,children:"Skip"})]})})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:t,children:"🚪 Exit Session"})})]}):e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("p",{children:"Loading question..."})})})})},Se=({progress:a,onRestart:s,onShowProgress:t})=>{const n=i=>i>=80?"text-green-600":i>=60?"text-yellow-600":"text-red-600",o=i=>i>=90?"🌟":i>=80?"🎉":i>=70?"👍":i>=60?"👌":i>=50?"💪":"📚",r=i=>i>=90?"Outstanding! You're mastering this level! 🌟":i>=80?"Excellent work! You're ready for the next challenge! 🎉":i>=70?"Great job! Keep up the good work! 👍":i>=60?"Good effort! A little more practice will help! 👌":i>=50?"You're getting there! Keep practicing! 💪":"Don't give up! Every expert was once a beginner! 📚",c=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-6xl mb-4 bounce",children:o(a.scorePct)}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Session Complete!"}),e.jsx("p",{className:"text-gray-600",children:"Here are your results"})]}),e.jsxs("div",{className:"card mb-6",style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsxs("div",{className:"card-header text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"📊 Your Score"}),e.jsxs("div",{className:`text-5xl font-bold ${n(a.scorePct)}`,children:[a.scorePct,"%"]}),e.jsxs("p",{className:"text-lg text-gray-600 mt-2",children:[a.correct," out of ",a.total," correct"]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"progress",style:{height:"12px"},children:e.jsx("div",{className:"progress-bar",style:{width:`${a.scorePct}%`,backgroundColor:a.scorePct>=80?"#10B981":a.scorePct>=60?"#F59E0B":"#EF4444"}})})}),e.jsx("div",{className:"alert alert-info mb-6",children:e.jsx("p",{className:"text-center font-medium",children:r(a.scorePct)})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Language"}),e.jsx("div",{className:"text-lg",children:a.track==="EN"?"🇺🇸 English":"🇯🇵 Japanese"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Framework"}),e.jsx("div",{className:"text-lg",children:a.framework})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Level"}),e.jsx("div",{className:"text-lg",children:a.level})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Mode"}),e.jsx("div",{className:"text-lg",children:a.mode})]})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:["Completed on ",c(a.date)]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{className:"btn btn-primary btn-lg",onClick:s,children:"🚀 Start New Session"}),e.jsx("button",{className:"btn btn-secondary",onClick:t,children:"📊 View All Progress"})]})})]}),e.jsxs("div",{className:"card",style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-center",children:"💡 Tips for Improvement"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-sm space-y-2",children:[a.scorePct<60&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"• 📖 Review the basics of this level before trying again"}),e.jsx("p",{children:"• 🔄 Practice similar questions to build confidence"}),e.jsx("p",{children:"• ⏰ Take your time to read each question carefully"})]}),a.scorePct>=60&&a.scorePct<80&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"• 🎯 Focus on the question types you missed"}),e.jsx("p",{children:"• 📚 Try studying mode for more detailed explanations"}),e.jsx("p",{children:"• 🔄 Regular practice will help improve your score"})]}),a.scorePct>=80&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"• 🚀 You're ready to try the next difficulty level!"}),e.jsx("p",{children:"• 🎯 Challenge yourself with exam mode"}),e.jsx("p",{children:"• 📈 Keep practicing to maintain your skills"})]}),e.jsx("p",{children:"• 📱 This app works offline - practice anytime, anywhere!"})]})})]})]})},we=({progressHistory:a,onBack:s,onClearHistory:t})=>{const[n,o]=u.useState("date"),[r,c]=u.useState("all"),i=a.filter(l=>r==="all"||l.track===r).sort((l,m)=>n==="date"?new Date(m.date).getTime()-new Date(l.date).getTime():m.scorePct-l.scorePct),d={totalSessions:a.length,averageScore:a.length>0?Math.round(a.reduce((l,m)=>l+m.scorePct,0)/a.length):0,bestScore:a.length>0?Math.max(...a.map(l=>l.scorePct)):0,totalQuestions:a.reduce((l,m)=>l+m.total,0),totalCorrect:a.reduce((l,m)=>l+m.correct,0)},h=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=l=>l>=80?"text-green-600 bg-green-100":l>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",f=()=>{window.confirm("Are you sure you want to clear all progress history? This cannot be undone.")&&t()};return e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"📊 Learning Progress"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:s,children:"← Back"})]}),a.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.totalSessions}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sessions"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[d.averageScore,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Average"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[d.bestScore,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Best Score"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:d.totalCorrect}),e.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]})})]}),a.length>0&&e.jsx("div",{className:"card mb-6",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Sort by:"}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"120px"},value:n,onChange:l=>o(l.target.value),children:[e.jsx("option",{value:"date",children:"📅 Date"}),e.jsx("option",{value:"score",children:"🎯 Score"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Language:"}),e.jsxs("select",{className:"form-select",style:{width:"auto",minWidth:"120px"},value:r,onChange:l=>c(l.target.value),children:[e.jsx("option",{value:"all",children:"🌍 All"}),e.jsx("option",{value:"EN",children:"🇺🇸 English"}),e.jsx("option",{value:"JP",children:"🇯🇵 Japanese"})]})]}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:f,children:"🗑️ Clear History"})]})})})]}),i.length===0?e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📚"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Progress Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a.length===0?"Start your first learning session to see your progress here!":"No sessions match your current filters."}),e.jsx("button",{className:"btn btn-primary",onClick:s,children:"Start Learning"})]})}):e.jsx("div",{className:"space-y-4",children:i.map((l,m)=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-lg",children:l.track==="EN"?"🇺🇸":"🇯🇵"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[l.framework," - ",l.level]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.mode," • ",h(l.date)]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.correct,"/",l.total," questions correct"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold ${v(l.scorePct)}`,children:[l.scorePct,"%"]})})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"progress",style:{height:"6px"},children:e.jsx("div",{className:"progress-bar",style:{width:`${l.scorePct}%`,backgroundColor:l.scorePct>=80?"#10B981":l.scorePct>=60?"#F59E0B":"#EF4444"}})})})]})},m))}),a.length>0&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold",children:"🏆 Achievements"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-center",children:[d.totalSessions>=1&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🎯"}),e.jsx("div",{className:"text-sm font-medium",children:"First Steps"})]}),d.totalSessions>=5&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🔥"}),e.jsx("div",{className:"text-sm font-medium",children:"Getting Started"})]}),d.totalSessions>=10&&e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-1",children:"💪"}),e.jsx("div",{className:"text-sm font-medium",children:"Dedicated"})]}),d.bestScore>=80&&e.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-1",children:"⭐"}),e.jsx("div",{className:"text-sm font-medium",children:"High Scorer"})]}),d.bestScore>=95&&e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🌟"}),e.jsx("div",{className:"text-sm font-medium",children:"Perfect!"})]}),d.totalCorrect>=50&&e.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🎓"}),e.jsx("div",{className:"text-sm font-medium",children:"Scholar"})]})]})})]})})]})};class ke{constructor(){b(this,"settings",{enabled:!1,dailyReminder:!0,studyTime:"19:00",achievements:!0,streakReminder:!0,weeklyReport:!0});b(this,"scheduledNotifications",[]);this.loadSettings(),this.setupServiceWorkerMessaging()}loadSettings(){const s=localStorage.getItem("sakulang-notification-settings");if(s)try{this.settings={...this.settings,...JSON.parse(s)}}catch(t){console.error("Failed to load notification settings:",t)}}saveSettings(){localStorage.setItem("sakulang-notification-settings",JSON.stringify(this.settings))}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(Notification.permission==="granted")return this.settings.enabled=!0,this.saveSettings(),this.scheduleNotifications(),!0;if(Notification.permission==="denied")return!1;const t=await Notification.requestPermission()==="granted";return this.settings.enabled=t,this.saveSettings(),t&&this.scheduleNotifications(),t}updateSettings(s){this.settings={...this.settings,...s},this.saveSettings(),this.settings.enabled?this.scheduleNotifications():this.clearAllNotifications()}getSettings(){return{...this.settings}}async showNotification(s,t,n){!this.settings.enabled||Notification.permission!=="granted"||("serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",payload:{title:s,body:t,options:n}}):new Notification(s,{body:t,icon:"/icon-192.png",badge:"/icon-192.png",...n}))}async showAchievement(s,t){this.settings.achievements&&await this.showNotification("🏆 Achievement Unlocked!",`${s}: ${t}`,{icon:"/icon-192.png",badge:"/icon-192.png",tag:"achievement",requireInteraction:!0,data:{actions:["view","dismiss"]}})}async showStreakReminder(s){if(!this.settings.streakReminder)return;const t=[`🔥 ${s} day streak! Keep it going!`,`💪 Amazing ${s} day streak! You're on fire!`,`⭐ ${s} days in a row! You're unstoppable!`],n=t[Math.floor(Math.random()*t.length)];await this.showNotification("SAKULANG Streak",n||"Keep your streak going!",{icon:"/icon-192.png",tag:"streak"})}scheduleNotifications(){this.clearAllNotifications(),this.settings.dailyReminder&&this.scheduleDailyReminder(),this.settings.weeklyReport&&this.scheduleWeeklyReport()}scheduleDailyReminder(){const s=this.settings.studyTime.split(":"),t=parseInt(s[0]||"19",10),n=parseInt(s[1]||"0",10),o=new Date,r=new Date;r.setHours(t,n,0,0),r<=o&&r.setDate(r.getDate()+1);const c={id:"daily-reminder",title:"📚 Time to Learn!",body:"Ready for your daily language practice? Let's keep your streak going!",scheduledTime:r.getTime(),type:"daily"};this.scheduleNotification(c)}scheduleWeeklyReport(){const s=new Date,t=new Date;t.setDate(s.getDate()+(7-s.getDay())),t.setHours(10,0,0,0);const n={id:"weekly-report",title:"📊 Weekly Progress Report",body:"Check out your learning progress from this week!",scheduledTime:t.getTime(),type:"weekly"};this.scheduleNotification(n)}scheduleNotification(s){const t=s.scheduledTime-Date.now();t>0&&(setTimeout(()=>{this.showNotification(s.title,s.body),s.type==="daily"?this.scheduleDailyReminder():s.type==="weekly"&&this.scheduleWeeklyReport()},t),this.scheduledNotifications.push(s))}clearAllNotifications(){this.scheduledNotifications=[]}setupServiceWorkerMessaging(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",s=>{s.data.type==="NOTIFICATION_CLICKED"&&this.handleNotificationClick(s.data.payload)})}handleNotificationClick(s){switch(s.action){case"view":window.focus();break;case"start-learning":window.focus();break;default:window.focus()}}async testNotification(){await this.showNotification("🧪 Test Notification","SAKULANG notifications are working perfectly!",{icon:"/icon-192.png",tag:"test"})}}const k=new ke,Ce=()=>{const[a,s]=u.useState(k.getSettings()),[t,n]=u.useState("Notification"in window?Notification.permission:"denied");return u.useEffect(()=>{const i=setInterval(()=>{"Notification"in window&&n(Notification.permission)},1e3);return()=>clearInterval(i)},[]),{settings:a,permission:t,requestPermission:async()=>{const c=await k.requestPermission();return n(Notification.permission),c},updateSettings:c=>{k.updateSettings(c),s(k.getSettings())},showAchievement:k.showAchievement.bind(k),showStreakReminder:k.showStreakReminder.bind(k),testNotification:k.testNotification.bind(k)}};class Ae{constructor(){b(this,"settings",{enabled:!1,shareCountry:!0,shareCity:!1,shareTimezone:!0,shareCoordinates:!1});b(this,"cachedLocation",null);b(this,"lastFetch",0);b(this,"CACHE_DURATION",24*60*60*1e3);this.loadSettings()}loadSettings(){const s=localStorage.getItem("sakulang-location-settings");if(s)try{this.settings={...this.settings,...JSON.parse(s)}}catch(t){console.error("Failed to load location settings:",t)}}saveSettings(){localStorage.setItem("sakulang-location-settings",JSON.stringify(this.settings))}updateSettings(s){this.settings={...this.settings,...s},this.saveSettings(),this.settings.enabled||(this.cachedLocation=null,localStorage.removeItem("sakulang-location-cache"))}getSettings(){return{...this.settings}}async getLocation(){if(!this.settings.enabled)return null;if(this.cachedLocation&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.filterLocationData(this.cachedLocation);try{const s=await this.getLocationFromIP();let t=null;this.settings.shareCoordinates&&(t=await this.getLocationFromGPS());const n={...s,...t};return this.cachedLocation=n,this.lastFetch=Date.now(),localStorage.setItem("sakulang-location-cache",JSON.stringify({location:n,timestamp:this.lastFetch})),this.filterLocationData(n)}catch(s){return console.error("Failed to get location:",s),null}}async getLocationFromIP(){try{const s=await fetch("https://ipapi.co/json/",{headers:{"User-Agent":"SAKULANG/1.0"}});if(!s.ok)throw new Error("IP location service unavailable");const t=await s.json();return{country:t.country_name,countryCode:t.country_code,city:t.city,timezone:t.timezone}}catch(s){return console.warn("IP location failed, using fallback:",s),{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}}}async getLocationFromGPS(){return navigator.geolocation?new Promise(s=>{const t={enableHighAccuracy:!1,timeout:1e4,maximumAge:6e5};navigator.geolocation.getCurrentPosition(n=>{s({coordinates:{latitude:n.coords.latitude,longitude:n.coords.longitude}})},n=>{console.warn("GPS location failed:",n),s(null)},t)}):null}filterLocationData(s){const t={};return this.settings.shareCountry&&s.country&&(t.country=s.country,s.countryCode&&(t.countryCode=s.countryCode)),this.settings.shareCity&&s.city&&(t.city=s.city),this.settings.shareTimezone&&s.timezone&&(t.timezone=s.timezone),this.settings.shareCoordinates&&s.coordinates&&(t.coordinates=s.coordinates),t}getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}getUserLocale(){return navigator.language||"en-US"}clearLocationData(){this.cachedLocation=null,this.lastFetch=0,localStorage.removeItem("sakulang-location-cache")}async getAnonymizedLocation(){if(!this.settings.enabled||!this.settings.shareCountry)return{};const s=await this.getLocation(),t={};return s?.country&&(t.country=s.country),s?.timezone&&(t.timezone=s.timezone),t}isLocationAvailable(){return"geolocation"in navigator||!0}async requestLocationPermission(){if(!navigator.geolocation)return!1;try{const s=await navigator.permissions.query({name:"geolocation"});return s.state==="granted"?!0:s.state==="denied"?!1:new Promise(t=>{navigator.geolocation.getCurrentPosition(()=>t(!0),()=>t(!1),{timeout:5e3})})}catch(s){return console.error("Location permission check failed:",s),!1}}}const w=new Ae,X=()=>{const[a,s]=u.useState(null),[t,n]=u.useState(w.getSettings()),[o,r]=u.useState(!1),c=h=>{w.updateSettings(h),n(w.getSettings())},i=async()=>{r(!0);try{const h=await w.getLocation();s(h)}catch(h){console.error("Failed to fetch location:",h)}finally{r(!1)}},d=async()=>{const h=await w.requestLocationPermission();return h&&(c({shareCoordinates:!0}),await i()),h};return u.useEffect(()=>{t.enabled&&i()},[t.enabled]),{location:a,settings:t,loading:o,updateSettings:c,fetchLocation:i,requestPermission:d,clearLocationData:w.clearLocationData.bind(w),getUserTimezone:w.getUserTimezone.bind(w),getUserLocale:w.getUserLocale.bind(w)}},Le=()=>{const{theme:a,setTheme:s}=$(),{t}=D(),n=[{id:"default",name:"💙 Minimal Blue",preview:"#6366F1"},{id:"cute",name:"💖 Cute Pink",preview:"#EC4899"},{id:"cool",name:"🌊 Cool Cyan",preview:"#06B6D4"},{id:"dark",name:"🌙 Dark Mode",preview:"#1F2937"}];return e.jsxs("div",{className:"theme-selector",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t("appearance")}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map(o=>e.jsxs("button",{onClick:()=>s(o.id),className:`theme-option ${a===o.id?"active":""}`,children:[e.jsx("div",{className:"theme-preview",style:{backgroundColor:o.preview}}),e.jsx("span",{className:"theme-name",children:o.name})]},o.id))})]})},Ee=()=>{const{stats:a,loading:s}=V(),{t}=D(),{location:n}=X(),[o,r]=u.useState(!1);return s?e.jsx("div",{className:"analytics-dashboard loading",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((c,i)=>e.jsx("div",{className:"h-20 bg-gray-200 rounded"},i))})]})}):a?e.jsxs("div",{className:"analytics-dashboard animate-fade-in",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:t("analytics")}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Real-time learning statistics from SAKULANG community"})]}),e.jsxs("div",{className:"stats-grid grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"👥"}),e.jsx("div",{className:"stat-value",children:a.totalUsers.toLocaleString()}),e.jsx("div",{className:"stat-label",children:t("totalUsers")})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⚡"}),e.jsx("div",{className:"stat-value",children:a.sessionsToday.toLocaleString()}),e.jsx("div",{className:"stat-label",children:t("sessionsToday")})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"❓"}),e.jsx("div",{className:"stat-value",children:a.questionsAnswered.toLocaleString()}),e.jsx("div",{className:"stat-label",children:t("questionsAnswered")})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🎯"}),e.jsxs("div",{className:"stat-value",children:[Math.round(a.averageAccuracy),"%"]}),e.jsx("div",{className:"stat-label",children:t("averageAccuracy")})]})]}),e.jsxs("div",{className:"popular-section mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🌍 Popular Languages"}),e.jsx("div",{className:"language-bars",children:Object.entries(a.popularLanguages).map(([c,i])=>{const d=i/Math.max(...Object.values(a.popularLanguages))*100;return e.jsxs("div",{className:"language-bar",children:[e.jsxs("div",{className:"language-info",children:[e.jsx("span",{className:"language-name",children:c==="EN"?"🇺🇸 English":"🇯🇵 Japanese"}),e.jsx("span",{className:"language-count",children:i})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${d}%`}})})]},c)})})]}),e.jsxs("div",{className:"popular-section mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"📚 Popular Frameworks"}),e.jsx("div",{className:"framework-grid grid grid-cols-3 gap-4",children:Object.entries(a.popularFrameworks).map(([c,i])=>e.jsxs("div",{className:"framework-card",children:[e.jsxs("div",{className:"framework-icon",children:[c==="Classic"&&"🎓",c==="CEFR"&&"🇪🇺",c==="JLPT"&&"🎌"]}),e.jsx("div",{className:"framework-name",children:c}),e.jsxs("div",{className:"framework-count",children:[i," sessions"]})]},c))})]}),n&&e.jsxs("div",{className:"location-section mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"📍 Your Location"}),e.jsxs("div",{className:"location-info",children:[n.country&&e.jsxs("span",{className:"location-item",children:["🌍 ",n.country]}),n.city&&e.jsxs("span",{className:"location-item",children:["🏙️ ",n.city]}),n.timezone&&e.jsxs("span",{className:"location-item",children:["🕐 ",n.timezone]})]})]}),e.jsx("div",{className:"details-toggle",children:e.jsx("button",{onClick:()=>r(!o),className:"btn btn-secondary",children:o?"Hide Details":"Show Details"})}),o&&e.jsx("div",{className:"detailed-stats animate-fade-in mt-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"font-semibold",children:"📊 Detailed Statistics"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"stats-table",children:[e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{children:"Active Users (24h)"}),e.jsx("span",{children:a.activeUsers})]}),e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{children:"Total Questions"}),e.jsx("span",{children:a.questionsAnswered.toLocaleString()})]}),e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{children:"Average Accuracy"}),e.jsxs("span",{children:[Math.round(a.averageAccuracy*100)/100,"%"]})]}),e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{children:"Most Popular Language"}),e.jsx("span",{children:Object.entries(a.popularLanguages).sort(([,c],[,i])=>i-c)[0]?.[0]||"N/A"})]})]})})]})}),e.jsxs("div",{className:"privacy-notice mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"🔒 Privacy Notice"}),e.jsx("p",{className:"text-sm text-gray-600",children:"All statistics are anonymized and aggregated. No personal information is shared. You can disable analytics anytime in settings."})]})]}):e.jsx("div",{className:"analytics-dashboard error",children:e.jsx("p",{className:"text-gray-500",children:"Unable to load analytics data"})})},Ie=({onBack:a})=>{const{user:s,updatePreferences:t,exportUserData:n,deleteAccount:o}=Z(),{settings:r,updateSettings:c,requestPermission:i,testNotification:d}=Ce(),{settings:h,updateSettings:v,requestPermission:f}=X(),{isEnabled:l,setEnabled:m}=V(),{t:x,language:p}=D(),{setLanguage:N}=$(),[S,U]=u.useState("appearance"),[L,I]=u.useState(!1),j=g=>{N(g),s&&t({language:g})},C=async()=>{try{const g=await n(),se=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),M=URL.createObjectURL(se),E=document.createElement("a");E.href=M,E.download=`sakulang-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(M)}catch(g){console.error("Failed to export data:",g)}},q=async()=>{L?(await o(),a()):(I(!0),setTimeout(()=>I(!1),1e4))},ee=[{id:"appearance",name:x("appearance"),icon:"🎨"},{id:"notifications",name:x("notifications"),icon:"🔔"},{id:"privacy",name:x("privacy"),icon:"🔒"},{id:"analytics",name:x("analytics"),icon:"📊"},{id:"about",name:x("about"),icon:"ℹ️"}];return e.jsxs("div",{className:"settings-screen animate-fade-in",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("button",{onClick:a,className:"btn btn-secondary btn-sm",children:["← ",x("back")]}),e.jsx("h1",{className:"text-2xl font-bold mt-4 mb-2",children:x("settings")}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Customize your SAKULANG experience"})]}),e.jsx("div",{className:"settings-tabs",children:e.jsx("div",{className:"tab-list",children:ee.map(g=>e.jsxs("button",{onClick:()=>U(g.id),className:`tab-button ${S===g.id?"active":""}`,children:[e.jsx("span",{className:"tab-icon",children:g.icon}),e.jsx("span",{className:"tab-name",children:g.name})]},g.id))})}),e.jsxs("div",{className:"settings-content",children:[S==="appearance"&&e.jsx("div",{className:"tab-content animate-slide-in",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-semibold",children:["🎨 ",x("appearance")]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(Le,{}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("h4",{className:"font-semibold mb-3",children:["🌍 ",x("language")]}),e.jsx("div",{className:"language-selector",children:[{code:"en",name:"🇺🇸 English",native:"English"},{code:"th",name:"🇹🇭 ไทย",native:"ภาษาไทย"},{code:"ja",name:"🇯🇵 日本語",native:"日本語"}].map(g=>e.jsxs("button",{onClick:()=>j(g.code),className:`language-option ${p===g.code?"active":""}`,children:[e.jsx("span",{className:"language-flag",children:g.name.split(" ")[0]}),e.jsxs("div",{className:"language-names",children:[e.jsx("div",{className:"language-english",children:g.name.split(" ")[1]}),e.jsx("div",{className:"language-native",children:g.native})]})]},g.code))})]})]})]})}),S==="notifications"&&e.jsx("div",{className:"tab-content animate-slide-in",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-semibold",children:["🔔 ",x("notifications")]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:"Enable Notifications"}),e.jsx("div",{className:"setting-description",children:"Get reminders and achievement notifications"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("button",{onClick:i,className:`toggle-button ${r.enabled?"active":""}`,disabled:r.enabled,children:r.enabled?"Enabled":"Enable"})})]}),r.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:x("dailyReminder")}),e.jsx("div",{className:"setting-description",children:"Daily learning reminder at your preferred time"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("input",{type:"checkbox",checked:r.dailyReminder,onChange:g=>c({dailyReminder:g.target.checked}),className:"checkbox"})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:x("studyTime")}),e.jsx("div",{className:"setting-description",children:"When would you like to be reminded?"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("input",{type:"time",value:r.studyTime,onChange:g=>c({studyTime:g.target.value}),className:"time-input"})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:x("achievements")}),e.jsx("div",{className:"setting-description",children:"Get notified when you unlock achievements"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("input",{type:"checkbox",checked:r.achievements,onChange:g=>c({achievements:g.target.checked}),className:"checkbox"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:d,className:"btn btn-secondary btn-sm",children:"🧪 Test Notification"})})]})]})]})}),S==="privacy"&&e.jsx("div",{className:"tab-content animate-slide-in",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-semibold",children:["🔒 ",x("privacy")]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:"Analytics & Usage Data"}),e.jsx("div",{className:"setting-description",children:"Help improve SAKULANG by sharing anonymous usage data"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("input",{type:"checkbox",checked:l,onChange:g=>m(g.target.checked),className:"checkbox"})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:"Location Services"}),e.jsx("div",{className:"setting-description",children:"Share your location for regional statistics (optional)"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("input",{type:"checkbox",checked:h.enabled,onChange:g=>{g.target.checked?f():v({enabled:!1})},className:"checkbox"})})]}),h.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:"Share Country"}),e.jsx("div",{className:"setting-description",children:"Include your country in statistics"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("input",{type:"checkbox",checked:h.shareCountry,onChange:g=>v({shareCountry:g.target.checked}),className:"checkbox"})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-title",children:"Share City"}),e.jsx("div",{className:"setting-description",children:"Include your city in statistics"})]}),e.jsx("div",{className:"setting-control",children:e.jsx("input",{type:"checkbox",checked:h.shareCity,onChange:g=>v({shareCity:g.target.checked}),className:"checkbox"})})]})]}),e.jsxs("div",{className:"privacy-actions mt-6",children:[e.jsx("button",{onClick:C,className:"btn btn-secondary mr-3",children:"📥 Export My Data"}),e.jsx("button",{onClick:q,className:`btn ${L?"btn-danger":"btn-secondary"}`,children:L?"⚠️ Confirm Delete":"🗑️ Delete Account"}),L&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"⚠️ This will permanently delete all your data. Click again to confirm."})]})]})]})}),S==="analytics"&&e.jsx("div",{className:"tab-content animate-slide-in",children:e.jsx(Ee,{})}),S==="about"&&e.jsx("div",{className:"tab-content animate-slide-in",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-semibold",children:["ℹ️ ",x("about")]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"app-info",children:[e.jsx("div",{className:"app-logo",children:"🎌"}),e.jsx("h2",{className:"app-name",children:"SAKULANG"}),e.jsx("p",{className:"app-version",children:"Version 1.0.0"}),e.jsx("p",{className:"app-description",children:"Free language learning platform with beautiful UI, analytics, and smart notifications."})]}),e.jsxs("div",{className:"features-list",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"✨ Features"}),e.jsxs("ul",{className:"feature-items",children:[e.jsx("li",{children:"🌍 Multi-language support (EN, TH, JP)"}),e.jsx("li",{children:"📚 Multiple frameworks (Classic, CEFR, JLPT)"}),e.jsx("li",{children:"🎯 3 question types (MCQ, Typing, Open)"}),e.jsx("li",{children:"📱 Mobile-friendly PWA"}),e.jsx("li",{children:"💾 Offline support"}),e.jsx("li",{children:"📊 Progress tracking & analytics"}),e.jsx("li",{children:"🔔 Smart notifications"}),e.jsx("li",{children:"🎨 Beautiful themes"}),e.jsx("li",{children:"🔒 Privacy-focused"})]})]}),e.jsxs("div",{className:"links-section",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"🔗 Links"}),e.jsxs("div",{className:"link-buttons",children:[e.jsx("a",{href:"https://github.com/intity01/saku-dojo-v2",target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary btn-sm",children:"📂 Source Code"}),e.jsx("a",{href:"https://intity01.github.io/saku-dojo-v2/",target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary btn-sm",children:"🌐 Website"})]})]}),e.jsxs("div",{className:"credits",children:[e.jsx("p",{className:"text-sm text-gray-600 mt-6",children:"Made with ❤️ for language learners worldwide"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"© 2024 SAKULANG - Open Source Language Learning Platform"})]})]})})]})})]})]})},Pe=()=>{const[a,s]=u.useState("start"),[t]=u.useState(()=>new K(Y)),[n,o]=u.useState([]),[r,c]=u.useState(null),{user:i,loginAsGuest:d}=Z(),{t:h}=D();u.useEffect(()=>{A.trackPageView("app_start"),i||d()},[i,d]),u.useEffect(()=>{const N=localStorage.getItem("saku-dojo-progress");if(N)try{o(JSON.parse(N))}catch(S){console.error("Failed to load progress:",S)}},[]);const v=N=>{const S=[...n,N];o(S),localStorage.setItem("saku-dojo-progress",JSON.stringify(S))},f=N=>{t.startSession(N)?s("quiz"):alert("ไม่พบคำถามสำหรับการตั้งค่านี้ กรุณาเลือกใหม่")},l=()=>{const N=t.finishSession();N&&(c(N),v(N),s("result"))},m=()=>{t.resetSession(),c(null),s("start")},x=()=>{s("progress")},p=()=>{s("settings")};return e.jsxs("div",{className:"app",children:[e.jsx("header",{className:"app-header",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"header-main",children:[e.jsx("h1",{className:"app-title",children:"🎌 SAKULANG"}),e.jsx("p",{className:"app-subtitle",children:h("tagline")})]}),e.jsxs("div",{className:"header-actions",children:[i&&e.jsx("div",{className:"user-info",children:e.jsxs("span",{className:"user-name",children:["👋 ",i.username]})}),e.jsx("button",{onClick:p,className:"btn btn-secondary btn-sm settings-btn",title:h("settings"),children:"⚙️"})]})]})})}),e.jsx("main",{className:"app-main",children:e.jsxs("div",{className:"container",children:[a==="start"&&e.jsx(ye,{onStartSession:f,onShowProgress:x,progressCount:n.length}),a==="quiz"&&e.jsx(be,{engine:t,onFinish:l,onExit:m}),a==="result"&&r&&e.jsx(Se,{progress:r,onRestart:m,onShowProgress:x}),a==="progress"&&e.jsx(we,{progressHistory:n,onBack:m,onClearHistory:()=>{o([]),localStorage.removeItem("saku-dojo-progress")}}),a==="settings"&&e.jsx(Ie,{onBack:m})]})}),e.jsx("footer",{className:"app-footer",children:e.jsx("div",{className:"container",children:e.jsx("p",{children:"© 2024 SAKULANG - Free Language Learning Platform"})})})]})};function Te(){return e.jsx(ve,{children:e.jsx(Pe,{})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(()=>{console.log("🔧 Service Worker registered successfully"),A.track("service_worker_registered")}).catch(a=>{console.error("❌ Service Worker registration failed:",a)})});A.track("app_initialized",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform});Q.createRoot(document.getElementById("root")).render(e.jsx(ie.StrictMode,{children:e.jsx(Te,{})}));
